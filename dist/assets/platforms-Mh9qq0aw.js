import{d as r,i as n}from"./index-BfYDDugh.js";const m=r((o,l)=>({accounts:[],isLoading:!1,error:null,loadAccounts:async()=>{o({isLoading:!0,error:null});try{const t=(await n("list_credentials")).map(e=>({platform:e.platform,accountId:e.account_id,accountName:e.account_name,email:e.email,isConnected:!1,publications:[]}));o({accounts:t,isLoading:!1});for(const e of t)l().testConnection(e.platform,e.accountId).catch(()=>{})}catch(a){o({error:String(a),isLoading:!1})}},addAccount:async(a,t)=>{o({isLoading:!0,error:null});try{const e=crypto.randomUUID();let c=t.api_key||"";a==="substack"&&(c=JSON.stringify({subdomain:t.subdomain||"",cookie:t.cookie||null})),await n("store_credential",{platform:a,accountId:e,apiKey:c,accountName:t.account_name||"",email:t.email||""});const i={platform:a,accountId:e,accountName:t.account_name||"",email:t.email||"",isConnected:!1,publications:[]};o(s=>({accounts:[...s.accounts,i],isLoading:!1})),await l().testConnection(a,e)}catch(e){o({error:String(e),isLoading:!1})}},removeAccount:async(a,t)=>{try{await n("disconnect_platform",{platform:a,accountId:t}),o(e=>({accounts:e.accounts.filter(c=>!(c.platform===a&&c.accountId===t))}))}catch(e){o({error:String(e)})}},testConnection:async(a,t)=>{try{const e=await n("connect_platform",{platform:a,accountId:t});return o(c=>({accounts:c.accounts.map(i=>i.platform===a&&i.accountId===t?{...i,isConnected:e}:i)})),e}catch{return o(e=>({accounts:e.accounts.map(c=>c.platform===a&&c.accountId===t?{...c,isConnected:!1}:c)})),!1}},refreshPublications:async(a,t)=>{try{const e=await n("get_publications",{platform:a,accountId:t});o(c=>({accounts:c.accounts.map(i=>i.platform===a&&i.accountId===t?{...i,publications:e}:i)}))}catch(e){o({error:String(e)})}}})),u=[{id:"beehiiv",name:"Beehiiv",color:"#FF6719",icon:"hexagon",description:"Scale your newsletter with Beehiiv's growth tools",apiDocsUrl:"https://developers.beehiiv.com",hasOfficialApi:!0,authType:"api_key",fields:[{key:"api_key",label:"API Key",placeholder:"Your Beehiiv API key",type:"password"},{key:"account_name",label:"Publication Name",placeholder:"My Newsletter",type:"text"},{key:"email",label:"Account Email",placeholder:"you@example.com",type:"text"}]},{id:"substack",name:"Substack",color:"#FF6719",icon:"book-open",description:"Publish to Substack (unofficial integration â€” limited features)",apiDocsUrl:"https://substack.com",hasOfficialApi:!1,authType:"session_cookie",fields:[{key:"subdomain",label:"Subdomain",placeholder:"yournewsletter (from yournewsletter.substack.com)",type:"text"},{key:"cookie",label:"Session Cookie (optional)",placeholder:"substack.sid=...",type:"textarea"},{key:"account_name",label:"Publication Name",placeholder:"My Substack",type:"text"},{key:"email",label:"Account Email",placeholder:"you@example.com",type:"text"}]},{id:"kit",name:"Kit",color:"#FB6970",icon:"mail",description:"Connect to Kit (formerly ConvertKit) for email marketing",apiDocsUrl:"https://developers.convertkit.com",hasOfficialApi:!0,authType:"api_key",fields:[{key:"api_key",label:"API Key",placeholder:"Your Kit API key (v4)",type:"password"},{key:"account_name",label:"Account Name",placeholder:"My Kit Account",type:"text"},{key:"email",label:"Account Email",placeholder:"you@example.com",type:"text"}]}];function y(o){return u.find(l=>l.id===o)}export{u as P,y as g,m as u};
